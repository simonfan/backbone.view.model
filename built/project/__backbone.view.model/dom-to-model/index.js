define(["require","exports","module","lodash","jquery","./read-dom-value"],function(e,t,n){var r=e("lodash"),i=e("jquery"),s=e("./read-dom-value");t.parsers={},t._initHtmlToModel=function(){this.$els={},this._updateModel=r.bind(this._updateModel,this),r.each(this.map,function(e,t){this.bindInput(e,t)}.bind(this)),this.$el.on("change",this.inputSelector,this._updateModel)},t.inputSelector="input,textarea",t.bindInput=function(t,n){if(r.isArray(t))r.each(t,r.bind(function(e){this.bindInput(e,n)},this));else{var i=this.$els[t]=this.$el.find(t);i.length>0&&i.data("backbone-view-model-bound-attribute",n).data("backbone-view-model-selector",t)}},t._updateModel=function(t){var n=i(t.target),r=n.data("backbone-view-model-bound-attribute");if(r){var o=n.data("backbone-view-model-selector"),u=this.$els[o],a=s(u),f=this.parsers[r];a=f?f.call(this,a):a,this.model.set(r,a)}}});