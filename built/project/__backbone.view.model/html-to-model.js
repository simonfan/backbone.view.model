define(["require","exports","module","lodash","jquery"],function(e,t,n){var r=e("lodash"),i=e("jquery");t._initHtmlToModel=function(){this.$map={},this._updateModel=r.bind(this._updateModel,this),r.each(this.map,function(e,t){this.bindInput(e,t)}.bind(this)),this.$el.on("change",this.inputSelector,this._updateModel)},t.inputSelector="input,textarea",t.bindInput=function(t,n){if(r.isArray(t))r.each(t,r.bind(function(e){this.bindInput(e,n)},this));else{var i=this.$el.find(t);this.$map[t]=i,i.data("bound-attribute",n).data("backbone-view-model-selector",t)}},t.$readers={"default":function(t){return t.val()},DIV:function(t){return t.html()},INPUT:function(t){return t.prop("type")==="checkbox"?r.map(t.filter(":checked"),function(e){return i(e).val()}):t.val()}},t.valueOf=function s(e){var t=this.$map[e];t||(t=this.$map[e]=this.$el.find(e));var n=t.prop("tagName"),r=this.$readers[n]||this.$readers["default"];return r(t)},t._updateModel=function(t){var n=i(t.target),r=n.data("bound-attribute");console.log(r);if(r){var s=n.data("backbone-view-model-selector"),o=this.valueOf(s);this.model.set(r,o)}}});