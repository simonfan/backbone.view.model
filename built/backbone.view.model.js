//     Backbone.View.Model
//     (c) simonfan
//     Backbone.View.Model is licensed under the MIT terms.

define("__backbone.view.model/dom-to-model/read-dom-value",["require","exports","module","lodash","jquery"],function(e,t,i){{var o=e("lodash"),n=e("jquery"),d={"default":function(e){return e.val()},DIV:function(e){return e.html()},INPUT:function(e){return"checkbox"===e.prop("type")?o.map(e.filter(":checked"),function(e){return n(e).val()}):e.val()}};i.exports=function(e){var t=e.prop("tagName"),i=d[t]||d["default"];return i(e)}}}),define("__backbone.view.model/dom-to-model/index",["require","exports","module","lodash","jquery","./read-dom-value"],function(e,t){var i=e("lodash"),o=e("jquery"),n=e("./read-dom-value");t.parsers={},t._initHtmlToModel=function(){this.$els={},this._updateModel=i.bind(this._updateModel,this),i.each(this.map,function(e,t){this.bindInput(e,t)}.bind(this)),this.$el.on("change",this.inputSelector,this._updateModel)},t.inputSelector="input,textarea",t.bindInput=function(e,t){if(i.isArray(e))i.each(e,i.bind(function(e){this.bindInput(e,t)},this));else{var o=this.$els[e]=this.$el.find(e);o.length>0&&o.data("backbone-view-model-bound-attribute",t).data("backbone-view-model-selector",e)}},t._updateModel=function(e){var t=o(e.target),i=t.data("backbone-view-model-bound-attribute");if(i){var d=t.data("backbone-view-model-selector"),l=this.$els[d],a=n(l),s=this.parsers[i];a=s?s.call(this,a):a,this.model.set(i,a)}}}),define("__backbone.view.model/model-to-dom",["require","exports","module","lodash","jquery.filler"],function(e,t){var i=e("lodash"),o=e("jquery.filler");t.stringifiers={},t._initModelToHtml=function(){this.fill=o(this.$el,this.map),this._updateView=i.bind(this._updateView,this),this.listenTo(this.model,"change",this._updateView),this._updateView(this.model)},t._updateView=function(e){var t=this.stringifiers,o=i.mapValues(e.attributes,function(e,i){var o=t[i];return o?o.call(this,e):e});console.log(o),this.fill(o)}}),define("backbone.view.model",["require","exports","module","backbone","lodash","./__backbone.view.model/dom-to-model/index","./__backbone.view.model/model-to-dom"],function(e,t,i){{var o=e("backbone"),n=e("lodash");i.exports=o.View.extend({initialize:function(){if(!this.$el)throw new Error("No given $el on ModelView initialization.");this.model=n.isFunction(this.model)?new this.model:this.model,this._initModelToHtml(),this._initHtmlToModel()}}).extend(e("./__backbone.view.model/dom-to-model/index")).extend(e("./__backbone.view.model/model-to-dom"))}});